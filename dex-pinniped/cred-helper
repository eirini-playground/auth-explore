#!/bin/sh

set -e

pinniped login oidc \
  --enable-concierge \
  --concierge-api-group-suffix=pinniped.dev \
  --concierge-authenticator-name=my-jwt-authenticator \
  --concierge-authenticator-type=jwt \
  --concierge-endpoint=https://35.195.77.247 \
  --concierge-ca-bundle-data=LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJ0akNDQVZ1Z0F3SUJBZ0lRUHlhTXV5SUxjR2NCZENkN0hhb1BoekFLQmdncWhrak9QUVFEQWpBcU1TZ3cKSmdZRFZRUURFeDlRYVc1dWFYQmxaQ0JKYlhCbGNuTnZibUYwYVc5dUlGQnliM2g1SUVOQk1DQVhEVEl4TURjeQpOakV3TlRVeU4xb1lEekl4TWpFd056QXlNVEExTlRNM1dqQXFNU2d3SmdZRFZRUURFeDlRYVc1dWFYQmxaQ0JKCmJYQmxjbk52Ym1GMGFXOXVJRkJ5YjNoNUlFTkJNRmt3RXdZSEtvWkl6ajBDQVFZSUtvWkl6ajBEQVFjRFFnQUUKUjBURFJqUVRaaFV2dXQ4QXNPSGl5LzhxVUpoUmkvcitPOC9SMFZzU1l6M2lOUzE3TWpXemNtQVMrN2k1aytHbwprL0dGcEV1SXZIMzhXVnQrcEVNUVdhTmhNRjh3RGdZRFZSMFBBUUgvQkFRREFnS0VNQjBHQTFVZEpRUVdNQlFHCkNDc0dBUVVGQndNQ0JnZ3JCZ0VGQlFjREFUQVBCZ05WSFJNQkFmOEVCVEFEQVFIL01CMEdBMVVkRGdRV0JCU0oKZjkxM0xWbUwzeWdFRG5MLzYwRUFrK0xKOHpBS0JnZ3Foa2pPUFFRREFnTkpBREJHQWlFQXo5MUtrMHVxNHU1Two1blR5V3prVXVYWG9GblJxZUFhS3NnZXRUUGFHd2V3Q0lRQ21QUWo3TGNkalprNGFzTEZYa2tXcTVwMTRqK2xOClRSMW9hMlJzUVAvQ0hRPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo= \
  --issuer=https://34.79.30.29.nip.io \
  --client-id=cf-cli \
  --scopes=openid,email \
  --skip-browser \
  --listen-port=5555 \
  --ca-bundle-data=LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURCVENDQWUyZ0F3SUJBZ0lVVkhBa1FMUFpxc0hSeGUrVjR5R2ZVSnNvZ1dJd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0VqRVFNQTRHQTFVRUF3d0hhM1ZpWlMxallUQWVGdzB5TVRBM01qWXhNVEV4TkRsYUZ3MHlNVEE0TURVeApNVEV4TkRsYU1CSXhFREFPQmdOVkJBTU1CMnQxWW1VdFkyRXdnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCCkR3QXdnZ0VLQW9JQkFRRFFTVVU5bzY1aGhmVS9EOGU3cDdVT2RiMDlEakI2aU4xNzF1WHFqbmd0VWRzdTNJSDEKdC9qZGJNWW1OUTk1eldGQUFZanZpTnNibXduQ3RKWXlhNktMeERWL2JoY29Pb2dabkxPTWRTT0ZJZWhrNEh6awpYcHcyTUloU0g1QWk0cUZzN0t2U3pmd2xhTEhISVM2dkdaazFRSTRuYUFTTGVycVFhRzluZTZBckdUQ1FXMGZzCmo0bUZJeTJnem1BTVVqeGpqUmdVeU9wUlU2Y08rb2tlZllkdEVsbk8vYk9paHFzU3UybEhuc3NIbnQzb0JpMHQKa05GVGpQNUg3VTlOUmpENVQ2ZFRWeW10ZlRHQytCQ3h4Ri90dDcrREZKUmZCSXI5Q0xlSkZLSzhuM1RaTmt0VApIeW1yY0RMZTRLWnRlaElZQ0VybDQ2UVNxOXhFc0grMlFNbTFBZ01CQUFHalV6QlJNQjBHQTFVZERnUVdCQlJSClVFUEF5NTJ6a2JORkFxZTlaaVBtamIyUVRqQWZCZ05WSFNNRUdEQVdnQlJSVUVQQXk1MnprYk5GQXFlOVppUG0KamIyUVRqQVBCZ05WSFJNQkFmOEVCVEFEQVFIL01BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRRERiY3BCcTNqOAp4dmVKNXNaMFBpR05lUTJDM1E3dU4xb05MZ09zcThodFMyQ2g0NnZyUHFDNXBwNWNpZi9tYUxmL3NwMHVmNUVOCmpHVUhoSnh3Ujd2SGVHQ2R2cFVKcFVkbWxUR0Z6R1dzMXNzMXhEMytnYjlNRjFnOTdubjVBOGdubldwNEtnNDEKbkMyV1doV3hvQ3phOG9NVUQycTJ1RVA1RjArbm1WZEtYOUxiOWplcVF0dW9oZ1RrRzIrckxkMURrdXpzOTF6OAp3clI3RU1lTTNoRnhhN1VEblVlYU5wWE5CZ0srU1hyNEg2NmFxQVZLUGhiSFV2ZGJmem5uakZqZzdtWnBMN1dLCmxRT1RTZzFCcS9wZVFZUmJRUzJNbFBuOXBXM2tKOThWV0QxSnIwSkl3bEVqQTRWNUxpbHgxSEx1TWZUejljYWcKYU5aazh2T0IwTGJ0Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K \
  --request-audience=cf-cli
